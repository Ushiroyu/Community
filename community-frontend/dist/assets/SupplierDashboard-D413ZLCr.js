import{u as E}from"./index-BRtYqat6.js";import{v as P,E as k,a as w}from"./el-table-column-KoNqeqPg.js";import{E as D}from"./el-empty-aBf0dV6S.js";import"./el-checkbox-BY45api5.js";import"./el-tooltip-l0sNRNKZ.js";import"./el-scrollbar-eEMXupeW.js";/* empty css               */import{_ as B,E as N}from"./_plugin-vue_export-helper-BH_is9DS.js";import{p as x,l as C}from"./supplier-DrPTNbdy.js";import{E as v}from"./http-y0YsLSxU.js";import{r as g,K as I,p as V,c as $,o as f,a as t,E as p,Q as o,D as u,U as L,B as h,R,P as b}from"./vendor-vue-CpX8Jn4o.js";import"./_Uint8Array-CSQzEANR.js";import"./_initCloneObject-CQpWRfh0.js";import"./_baseIteratee-BeonsPYq.js";import"./isEqual-BuOCdSDg.js";import"./castArray-esTnwj7j.js";import"./debounce-Bg3a7BCK.js";import"./vendor-icons-CDwfVtjd.js";import"./index-BquL_2tb.js";import"./index-CkCNIzEM.js";import"./focus-trap-P_RRA6FG.js";import"./typescript-Bp3YSIOJ.js";const T={class:"page-wrap supplier-dashboard"},M={class:"page-card dashboard-hero","aria-labelledby":"supplier-dashboard-title","aria-describedby":"supplier-dashboard-desc"},U={class:"sr-only"},W={class:"page-card",role:"region","aria-labelledby":"supplier-stats-title"},z={class:"stat-grid"},F={class:"stat-card"},K={class:"stat-card__value"},Q={class:"stat-card"},j={class:"stat-card__value"},q={class:"stat-card"},A={class:"stat-card__value"},G={class:"stat-card"},H={class:"stat-card__value"},J={class:"page-card latest-section",role:"region","aria-labelledby":"supplier-latest-orders-title"},O={class:"page-section-title"},X={__name:"SupplierDashboard",setup(Y){const c=E(),n=g(!1),m=g([]),r=I({pendingShipments:0,activeProducts:0,pendingProducts:0,shippedLastWeek:0}),y=l=>(Number(l)||0).toFixed(2);return V(async()=>{var l,s;if(c.isSupplier){n.value=!0;try{const[e,a]=await Promise.allSettled([x(c.userId),C(c.userId,{page:1,size:100})]);if(e.status==="fulfilled"&&e.value.code===0){const i=e.value.orders||e.value.list||((l=e.value.data)==null?void 0:l.list)||[];r.pendingShipments=i.length,m.value=i.slice(0,6)}else e.status==="fulfilled"&&v.error(e.value.msg||"待发货订单加载失败");if(a.status==="fulfilled"&&a.value.code===0){const i=a.value.records||((s=a.value.data)==null?void 0:s.records)||a.value.list||[];r.activeProducts=i.filter(d=>d.status===!0||d.status===1).length,r.pendingProducts=i.filter(d=>!d.approved).length}else a.status==="fulfilled"&&v.error(a.value.msg||"商品数据加载失败")}catch(e){v.error(e.message||"数据加载异常")}finally{n.value=!1}}}),(l,s)=>{const e=N,a=w,i=k,d=D,S=P;return f(),$("div",T,[t("section",M,[t("div",null,[s[2]||(s[2]=t("span",{class:"pill"},"供应商看板",-1)),s[3]||(s[3]=t("h1",{id:"supplier-dashboard-title",class:"hero-title"},"当前经营概览",-1)),s[4]||(s[4]=t("p",{id:"supplier-dashboard-desc",class:"hero-desc"}," 快速了解待发货订单、商品上架情况与审核进度，及时响应社区团购需求。 ",-1)),t("p",U," 待发货订单 "+o(r.pendingShipments)+" 笔，上架商品 "+o(r.activeProducts)+" 个，待审核商品 "+o(r.pendingProducts)+" 个。 ",1)]),p(e,{type:"primary",onClick:s[0]||(s[0]=_=>l.$router.push("/supplier/orders"))},{default:u(()=>[...s[5]||(s[5]=[b(" 前往订单发货 ",-1)])]),_:1})]),t("section",W,[s[14]||(s[14]=t("h2",{id:"supplier-stats-title",class:"sr-only"},"关键经营指标",-1)),t("div",z,[t("div",F,[s[6]||(s[6]=t("span",{class:"stat-card__title"},"待发货订单",-1)),t("span",K,o(r.pendingShipments),1),s[7]||(s[7]=t("span",{class:"stat-card__trend"},"需要尽快处理",-1))]),t("div",Q,[s[8]||(s[8]=t("span",{class:"stat-card__title"},"已上架商品",-1)),t("span",j,o(r.activeProducts),1),s[9]||(s[9]=t("span",{class:"stat-card__trend"},"含审核通过商品",-1))]),t("div",q,[s[10]||(s[10]=t("span",{class:"stat-card__title"},"待审核商品",-1)),t("span",A,o(r.pendingProducts),1),s[11]||(s[11]=t("span",{class:"stat-card__trend"},"请关注平台审核",-1))]),t("div",G,[s[12]||(s[12]=t("span",{class:"stat-card__title"},"近7日发货",-1)),t("span",H,o(r.shippedLastWeek),1),s[13]||(s[13]=t("span",{class:"stat-card__trend"},"含社区自提订单",-1))])])]),t("section",J,[t("header",O,[s[16]||(s[16]=t("h2",{id:"supplier-latest-orders-title"},"待发货订单",-1)),p(e,{text:"",type:"primary",onClick:s[1]||(s[1]=_=>l.$router.push("/supplier/shipments"))},{default:u(()=>[...s[15]||(s[15]=[b("查看全部",-1)])]),_:1})]),L((f(),h(i,{data:m.value,border:"","aria-describedby":"supplier-latest-orders-title"},{default:u(()=>[p(a,{prop:"orderId",label:"订单号",width:"140"}),p(a,{label:"金额",width:"120"},{default:u(({row:_})=>[b("¥ "+o(y(_.amount)),1)]),_:1}),p(a,{prop:"status",label:"状态",width:"120"}),p(a,{prop:"communityName",label:"配送社区"})]),_:1},8,["data"])),[[S,n.value]]),!n.value&&!m.value.length?(f(),h(d,{key:0,description:"暂无待发货订单"})):R("",!0)])])}}},Es=B(X,[["__scopeId","data-v-d3addb4d"]]);export{Es as default};
