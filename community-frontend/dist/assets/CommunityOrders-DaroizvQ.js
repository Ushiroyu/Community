import{u as H}from"./index-BRtYqat6.js";import{v as Y,E as j,a as q}from"./el-table-column-KoNqeqPg.js";import{E as F,a as Q,b as G}from"./el-select-BS9GzTGv.js";/* empty css               */import"./el-scrollbar-eEMXupeW.js";/* empty css                 */import{E as J}from"./el-empty-aBf0dV6S.js";import"./el-checkbox-BY45api5.js";import"./el-tooltip-l0sNRNKZ.js";import{_ as K,E as W}from"./_plugin-vue_export-helper-BH_is9DS.js";import{E as X}from"./el-segmented-Wqm1m1L1.js";import{d as Z}from"./vendor-utils-Bof1u0Bp.js";import{l as $}from"./orders-BKzCgbou.js";import{E as L}from"./http-y0YsLSxU.js";import{E as ee}from"./index-B89e1ymx.js";import{r as i,b as te,p as ae,c as V,o as E,a,Q as c,E as l,D as n,U as le,B as P,R as S,P as y}from"./vendor-vue-CpX8Jn4o.js";import"./_Uint8Array-CSQzEANR.js";import"./_initCloneObject-CQpWRfh0.js";import"./_baseIteratee-BeonsPYq.js";import"./isEqual-BuOCdSDg.js";import"./castArray-esTnwj7j.js";import"./debounce-Bg3a7BCK.js";import"./vendor-icons-CDwfVtjd.js";import"./index-BquL_2tb.js";import"./index-C9h3pgbl.js";import"./typescript-Bp3YSIOJ.js";import"./scroll-C14GUqjp.js";import"./vnode-D67uqoy8.js";import"./index-CkCNIzEM.js";import"./focus-trap-P_RRA6FG.js";const oe={class:"page-wrap leader-orders"},se={class:"page-card orders-hero","aria-labelledby":"leader-orders-title","aria-describedby":"leader-orders-desc"},re={class:"sr-only"},ne={class:"hero-actions","aria-label":"筛选器"},ie={class:"table-card","aria-labelledby":"leader-orders-table-title",role:"region"},de={class:"table-card__header table-header"},pe={class:"table-tools"},ue={class:"table-card__body"},me={key:1,class:"pagination-bar"},ce={__name:"CommunityOrders",setup(_e){const w=H(),s=i("ALL"),f=i([]),_=i(0),d=i(1),b=i(10),v=i(!1),h={CREATED:{label:"待支付",type:"warning"},PAID:{label:"待发货",type:"primary"},SHIPPED:{label:"运输中",type:"info"},DELIVERED:{label:"已完成",type:"success"},CANCELLED:{label:"已取消",type:"danger"}},x=[{label:"全部",value:"ALL"},{label:"待付款",value:"CREATED"},{label:"待发货",value:"PAID"},{label:"运输中",value:"SHIPPED"},{label:"已完成",value:"DELIVERED"}],I=u=>(Number(u)||0).toFixed(2),k=te(()=>s.value==="ALL"?void 0:s.value),p=async()=>{var u,e;v.value=!0;try{const o=await $(w.userId,{status:k.value,page:d.value,size:b.value});if(o.code===0){const g=o.list||((u=o.data)==null?void 0:u.list)||[];f.value=g.map(r=>({...r,createdAt:r.createdAt?Z(r.createdAt).format("YYYY-MM-DD HH:mm"):""})),_.value=o.total??((e=o.data)==null?void 0:e.total)??g.length}else L.error(o.msg||"加载失败")}catch(o){L.error(o.message||"加载失败")}finally{v.value=!1}},z=()=>{d.value=1,p()},B=()=>{d.value=1,p()};return ae(p),(u,e)=>{var C;const o=X,g=W,r=G,N=F,m=q,T=ee,M=j,O=J,R=Q,U=Y;return E(),V("div",oe,[a("section",se,[a("div",null,[e[3]||(e[3]=a("span",{class:"pill"},"社区订单",-1)),e[4]||(e[4]=a("h1",{id:"leader-orders-title",class:"hero-title"},"跟踪社区配送进度",-1)),e[5]||(e[5]=a("p",{id:"leader-orders-desc",class:"hero-desc"}," 可通过状态筛选查看订单详情，及时掌握在途与待签收订单，确保居民满意度。 ",-1)),a("p",re," 当前筛选状态为 "+c(s.value==="ALL"?"全部":((C=h[s.value])==null?void 0:C.label)||s.value)+"，列表共 "+c(_.value)+" 笔订单，支持切换状态与分页查看。 ",1)]),a("div",ne,[e[7]||(e[7]=a("span",{id:"leader-status-tip",class:"sr-only"},"选择订单状态后列表会自动刷新。",-1)),l(o,{modelValue:s.value,"onUpdate:modelValue":e[0]||(e[0]=t=>s.value=t),options:x,onChange:z,"aria-describedby":"leader-status-tip"},null,8,["modelValue"]),l(g,{text:"",type:"primary",onClick:p},{default:n(()=>[...e[6]||(e[6]=[y("刷新",-1)])]),_:1})])]),a("section",ie,[a("header",de,[e[8]||(e[8]=a("h2",{id:"leader-orders-table-title",class:"page-section-title"},"订单列表",-1)),a("div",pe,[l(N,{modelValue:b.value,"onUpdate:modelValue":e[1]||(e[1]=t=>b.value=t),placeholder:"每页数量",size:"small",onChange:B,"aria-label":"选择每页显示数量"},{default:n(()=>[l(r,{value:10,label:"每页 10"}),l(r,{value:20,label:"每页 20"}),l(r,{value:50,label:"每页 50"})]),_:1},8,["modelValue"])])]),a("div",ue,[le((E(),P(M,{data:f.value,border:"","aria-describedby":"leader-orders-table-title"},{default:n(()=>[l(m,{prop:"id",label:"订单号",width:"120"}),l(m,{label:"金额",width:"120"},{default:n(({row:t})=>[y("¥ "+c(I(t.amount)),1)]),_:1}),l(m,{label:"状态",width:"140"},{default:n(({row:t})=>{var D;return[l(T,{type:((D=h[t.status])==null?void 0:D.type)||"info"},{default:n(()=>{var A;return[y(c(((A=h[t.status])==null?void 0:A.label)||t.status),1)]}),_:2},1032,["type"])]}),_:1}),l(m,{prop:"createdAt",label:"下单时间","min-width":"180"}),l(m,{label:"备注","min-width":"160"},{default:n(({row:t})=>[y(c(t.remark||"—"),1)]),_:1})]),_:1},8,["data"])),[[U,v.value]]),!v.value&&!f.value.length?(E(),P(O,{key:0,description:"暂无订单数据"})):S("",!0),_.value?(E(),V("div",me,[l(R,{total:_.value,"current-page":d.value,"onUpdate:currentPage":e[2]||(e[2]=t=>d.value=t),"page-size":b.value,layout:"prev, pager, next, jumper",onCurrentChange:p},null,8,["total","current-page","page-size"])])):S("",!0)])])])}}},Fe=K(ce,[["__scopeId","data-v-a1b3a0c6"]]);export{Fe as default};
