import{u as U}from"./index-BRtYqat6.js";import{E as q,a as M}from"./el-descriptions-item-DmnZKFQu.js";/* empty css               */import{_ as O,E as R,a as z}from"./_plugin-vue_export-helper-BH_is9DS.js";/* empty css                 */import{E as F}from"./el-input-number-B8mXtdEx.js";import{E as G}from"./el-skeleton-item-CblNMWFr.js";import{r as _,b as L,p as Q,c as f,o as p,B as j,S as A,a as e,Q as r,R as H,E as l,D as n,O as J,P as i,u as K}from"./vendor-vue-CpX8Jn4o.js";import{f as W}from"./vendor-icons-CDwfVtjd.js";import{g as X}from"./products-BcjaDRHQ.js";import{a as Y}from"./cart-CrYWUkoX.js";import{E as u}from"./http-y0YsLSxU.js";import{E as Z}from"./index-B89e1ymx.js";import"./vnode-D67uqoy8.js";import"./index-C9h3pgbl.js";import"./typescript-Bp3YSIOJ.js";import"./index-eOEDSGTO.js";const $={class:"page-wrap product-detail"},ee={class:"page-card product-hero"},se={class:"product-gallery"},te={class:"hero-thumb"},oe={class:"thumb-meta"},ae={key:0,class:"pill"},le={class:"thumb-stock"},re={class:"thumb-supplier"},ne={class:"product-info"},ie={class:"product-title"},ce={class:"product-description"},ue={class:"product-price"},pe={class:"product-price__value"},de={class:"purchase-panel"},me={class:"quantity-control"},_e={class:"product-guarantee"},fe={class:"page-card"},ve={__name:"ProductDetail",setup(ge){const v=J(),g=U(),o=_(null),d=_(1),m=_(!0),D=async()=>{m.value=!0;try{const t=await X(v.params.id);if(t.code===0||t.success===!0||t.status===200){const s=t.data||t;o.value=s.item||s.product||s}else u.error(t.msg||"加载失败")}catch(t){u.error(t.message||"加载异常")}finally{m.value=!1}},N=async()=>{if(!g.isLogin){u.error("请先登录");return}try{const t=await Y(g.userId,Number(v.params.id),d.value);t.code===0||t.success===!0?u.success("已加入购物车"):u.error(t.msg||"加入失败")}catch(t){u.error(t.message||"加入失败")}},V=L(()=>{var t;return(t=o.value)!=null&&t.name?o.value.name.slice(0,2).toUpperCase():"GO"});return Q(D),(t,s)=>{var b,y,E,h,k,I,x;const B=G,w=F,C=R,P=z,c=M,S=Z,T=q;return p(),f("div",$,[m.value?(p(),j(B,{key:0,animated:"",throttle:200,rows:6})):(p(),f(A,{key:1},[e("section",ee,[e("div",se,[e("div",te,[e("span",null,r(V.value),1)]),e("div",oe,[(b=o.value)!=null&&b.categoryName?(p(),f("span",ae,"分类："+r(o.value.categoryName),1)):H("",!0),e("span",le,"当前库存："+r(((y=o.value)==null?void 0:y.stock)??0),1),e("span",re,"供应商 ID："+r(((E=o.value)==null?void 0:E.supplierId)||"暂无"),1)])]),e("div",ne,[e("h1",ie,r((h=o.value)==null?void 0:h.name),1),e("p",ce,r(((k=o.value)==null?void 0:k.description)||"该商品由可信赖的社区供应商提供，团长实时跟踪到货状态，保证品质与时效。"),1),e("div",ue,[s[1]||(s[1]=e("span",{class:"product-price__label"},"团购价",-1)),e("span",pe,"¥ "+r((I=o.value)==null?void 0:I.price),1)]),e("div",de,[e("div",me,[s[2]||(s[2]=e("span",null,"数量",-1)),l(w,{modelValue:d.value,"onUpdate:modelValue":s[0]||(s[0]=a=>d.value=a),min:1,max:((x=o.value)==null?void 0:x.stock)||1},null,8,["modelValue","max"])]),l(C,{type:"primary",size:"large",onClick:N},{default:n(()=>[...s[3]||(s[3]=[i(" 加入购物车 ",-1)])]),_:1})]),e("div",_e,[l(P,null,{default:n(()=>[l(K(W))]),_:1}),s[4]||(s[4]=e("span",null,"支持社区自提/团长配送，订单全程可追踪",-1))])])]),e("section",fe,[s[7]||(s[7]=e("div",{class:"page-section-title"},[e("span",null,"商品详情")],-1)),l(T,{column:2,border:"",class:"product-descriptions"},{default:n(()=>[l(c,{label:"商品名称"},{default:n(()=>{var a;return[i(r((a=o.value)==null?void 0:a.name),1)]}),_:1}),l(c,{label:"商品价格"},{default:n(()=>{var a;return[i("¥ "+r((a=o.value)==null?void 0:a.price),1)]}),_:1}),l(c,{label:"当前库存"},{default:n(()=>{var a;return[i(r(((a=o.value)==null?void 0:a.stock)??0),1)]}),_:1}),l(c,{label:"供应商 ID"},{default:n(()=>{var a;return[i(r(((a=o.value)==null?void 0:a.supplierId)||"暂无"),1)]}),_:1}),l(c,{label:"上架状态"},{default:n(()=>[l(S,{type:"success"},{default:n(()=>[...s[5]||(s[5]=[i("可售",-1)])]),_:1})]),_:1}),l(c,{label:"配送说明"},{default:n(()=>[...s[6]||(s[6]=[i(" 团长收货成功后 2 小时内完成社区配送 ",-1)])]),_:1})]),_:1})]),s[8]||(s[8]=e("section",{class:"page-card"},[e("div",{class:"page-section-title"},[e("span",null,"购买须知")]),e("ul",{class:"product-notice"},[e("li",null,"下单后可在「我的订单」中查看配送进度并支持售后申请。"),e("li",null,"如库存不足，团长会及时通知并提供替代推荐。"),e("li",null,"建议提前确认收货地址，确保与团长负责的社区一致。")])],-1))],64))])}}},qe=O(ve,[["__scopeId","data-v-9ee02217"]]);export{qe as default};
