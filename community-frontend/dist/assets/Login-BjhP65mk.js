import{u as w}from"./index-BRtYqat6.js";import{E as V,a as k}from"./el-form-item-DFokbjd4.js";import{_ as x,E as I}from"./_plugin-vue_export-helper-BH_is9DS.js";import{E as L}from"./el-checkbox-BY45api5.js";/* empty css                 */import{K as U,r as v,c as B,o as C,a as o,E as t,D as l,L as N,M as R,O as h,P as m,u as D}from"./vendor-vue-CpX8Jn4o.js";import{l as K}from"./auth-Cpo5wBhK.js";import{E as M}from"./index-C9h3pgbl.js";import{E as u}from"./http-y0YsLSxU.js";import"./castArray-esTnwj7j.js";import"./_Uint8Array-CSQzEANR.js";import"./_initCloneObject-CQpWRfh0.js";import"./vendor-icons-CDwfVtjd.js";import"./isEqual-BuOCdSDg.js";import"./typescript-Bp3YSIOJ.js";const P={class:"auth-scene"},S={class:"auth-card","aria-labelledby":"login-welcome"},q={class:"auth-card__form"},A={class:"form-actions"},F={class:"form-footer"},z={__name:"Login",setup(H){const b=R(),y=h(),E=w(),r=U({username:"",password:""}),p=v(!1),f=v(!0),g=async()=>{var c;if(!r.username||!r.password){u.error("è¯·è¾“å…¥ç”¨æˆ·åå’Œå¯†ç ");return}p.value=!0;try{const e=await K({username:r.username,password:r.password}),n=e==null?void 0:e.token,i=e==null?void 0:e.userId,s=e==null?void 0:e.role;if((e==null?void 0:e.code)===0&&n&&i){E.setLogin({token:n,userId:i,role:s,username:r.username,remember:f.value});const d=s==="ADMIN"?"/admin/dashboard":s==="LEADER"?"/leader/dashboard":s==="SUPPLIER"?"/supplier/dashboard":"/shop",_=typeof((c=y.query)==null?void 0:c.redirect)=="string"?y.query.redirect:"";b.replace(_||d)}else(e==null?void 0:e.code)!==0?u.error((e==null?void 0:e.msg)||"ç™»å½•å¤±è´¥"):u.error("ç™»å½•å¤±è´¥ï¼šç¼ºå°‘å‡­è¯")}catch(e){u.error(e.message||"ç™»å½•å¼‚å¸¸")}finally{p.value=!1}};return(c,e)=>{const n=M,i=k,s=L,d=I,_=V;return C(),B("div",P,[o("section",S,[e[11]||(e[11]=o("div",{class:"auth-card__side"},[o("div",{class:"brand-mark","aria-hidden":"true"},"ðŸƒ"),o("h2",{id:"login-welcome"},"æ¬¢è¿Žå›žåˆ°ç¤¾åŒºå›¢è´­"),o("p",null," ä¸€ç«™å¼å›¢è´­ç®¡ç†å¹³å°ï¼Œè¿žæŽ¥å±…æ°‘ã€å›¢é•¿ã€ä¾›åº”å•†ï¼Œè®©æ¯ä¸€æ¬¡ä¸‹å•éƒ½é€æ˜Žå¯æŽ§ã€‚ "),o("ul",null,[o("li",null,"å®žæ—¶æŽŒæ¡ç¤¾åŒºåº“å­˜ä¸Žé…é€çŠ¶æ€"),o("li",null,"æ”¯æŒå›¢é•¿ç®¡ç†ã€ä¾›åº”å•†å±¥çº¦"),o("li",null,"ä»¥ç¤¾åŒºä¸ºå•ä½çš„ç²¾å‡†æŽ¨è")])],-1)),o("div",q,[e[9]||(e[9]=o("div",{class:"form-header"},[o("h1",{id:"login-form-title"},"ç™»å½•è´¦æˆ·"),o("p",null,"ä½¿ç”¨å¹³å°è´¦å·å¿«é€Ÿç™»å½•ï¼Œç»§ç»­ç®¡ç†å’Œä¸‹å•ã€‚")],-1)),e[10]||(e[10]=o("p",{id:"login-privacy",class:"sr-only"}," ç™»å½•ä¿¡æ¯ä»…ç”¨äºŽç¤¾åŒºå›¢è´­è´¦å·éªŒè¯ï¼Œä¸ä¼šç”¨äºŽå…¶ä»–ç”¨é€”ã€‚ ",-1)),t(_,{model:r,"label-position":"top","aria-labelledby":"login-form-title","aria-describedby":"login-privacy",onKeyup:N(g,["enter","native"])},{default:l(()=>[t(i,{label:"ç”¨æˆ·å"},{default:l(()=>[t(n,{modelValue:r.username,"onUpdate:modelValue":e[0]||(e[0]=a=>r.username=a),placeholder:"è¯·è¾“å…¥ç”¨æˆ·å",clearable:""},null,8,["modelValue"])]),_:1}),t(i,{label:"å¯†ç "},{default:l(()=>[t(n,{modelValue:r.password,"onUpdate:modelValue":e[1]||(e[1]=a=>r.password=a),type:"password","show-password":"",placeholder:"è¯·è¾“å…¥å¯†ç "},null,8,["modelValue"])]),_:1}),o("div",A,[t(s,{modelValue:f.value,"onUpdate:modelValue":e[2]||(e[2]=a=>f.value=a)},{default:l(()=>[...e[4]||(e[4]=[m("è®°ä½æˆ‘",-1)])]),_:1},8,["modelValue"]),t(d,{text:"",type:"primary"},{default:l(()=>[...e[5]||(e[5]=[m("å¿˜è®°å¯†ç ï¼Ÿ",-1)])]),_:1})]),t(d,{type:"primary",size:"large",loading:p.value,onClick:g,class:"submit-btn"},{default:l(()=>[...e[6]||(e[6]=[m(" ç™»å½• ",-1)])]),_:1},8,["loading"]),o("div",F,[e[8]||(e[8]=m(" è¿˜æ²¡æœ‰è´¦å·ï¼Ÿ ",-1)),t(d,{link:"",type:"primary",onClick:e[3]||(e[3]=a=>D(b).push("/register"))},{default:l(()=>[...e[7]||(e[7]=[m("åŽ»æ³¨å†Œ",-1)])]),_:1})])]),_:1},8,["model"])])])])}}},le=x(z,[["__scopeId","data-v-94e46aca"]]);export{le as default};
