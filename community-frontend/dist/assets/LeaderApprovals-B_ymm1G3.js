import"./index-BRtYqat6.js";import{v as w,E as I,a as k}from"./el-table-column-KoNqeqPg.js";import{E as D}from"./el-empty-aBf0dV6S.js";import"./el-checkbox-BY45api5.js";import"./el-tooltip-l0sNRNKZ.js";import"./el-scrollbar-eEMXupeW.js";/* empty css               */import{_ as L,E as B}from"./_plugin-vue_export-helper-BH_is9DS.js";import{p as C}from"./leader-BM-s6ogo.js";import{a as N}from"./admin-C6mbQG5y.js";import{E as i}from"./http-y0YsLSxU.js";import{E as x}from"./index-B89e1ymx.js";import{r as u,p as T,c as V,o as m,a,E as o,Q as v,D as r,U as A,B as g,R as M,P as _}from"./vendor-vue-CpX8Jn4o.js";import"./_Uint8Array-CSQzEANR.js";import"./_initCloneObject-CQpWRfh0.js";import"./_baseIteratee-BeonsPYq.js";import"./isEqual-BuOCdSDg.js";import"./castArray-esTnwj7j.js";import"./debounce-Bg3a7BCK.js";import"./vendor-icons-CDwfVtjd.js";import"./index-BquL_2tb.js";import"./index-CkCNIzEM.js";import"./focus-trap-P_RRA6FG.js";import"./typescript-Bp3YSIOJ.js";const P={class:"page-wrap leader-approvals"},z={class:"page-card approvals-hero","aria-labelledby":"leader-approvals-title","aria-describedby":"leader-approvals-desc"},G={class:"sr-only"},Q={class:"table-card",role:"region","aria-labelledby":"leader-approvals-table-title"},R={class:"table-card__body"},S={__name:"LeaderApprovals",setup(U){const p=u([]),s=u(!1),c=async()=>{var t;s.value=!0;try{const e=await C();if(e.code===0){const d=e.pendingLeaders||((t=e.data)==null?void 0:t.pendingLeaders)||[];p.value=d.map(l=>({...l,_loading:!1}))}else i.error(e.msg||"加载失败")}catch(e){i.error(e.message||"加载失败")}finally{s.value=!1}},b=async t=>{t._loading=!0;try{const e=await N(t.id,t.userId);e.code===0?(i.success("已通过审核"),await c()):i.error(e.msg||"审核失败")}catch(e){i.error(e.message||"审核失败")}finally{t._loading=!1}};return T(c),(t,e)=>{const d=B,l=k,f=x,y=I,E=D,h=w;return m(),V("div",P,[a("section",z,[a("div",null,[e[0]||(e[0]=a("span",{class:"pill"},"团长审核",-1)),e[1]||(e[1]=a("h1",{id:"leader-approvals-title",class:"hero-title"},"审核社区团长入驻",-1)),e[2]||(e[2]=a("p",{id:"leader-approvals-desc",class:"hero-desc"}," 查看待审批的团长申请，核对社区信息后快速通过，保障团购服务覆盖率。 ",-1)),a("p",G," 当前共有 "+v(p.value.length)+" 条待审核记录，可逐条通过申请。 ",1)]),o(d,{type:"primary",onClick:c,loading:s.value},{default:r(()=>[...e[3]||(e[3]=[_(" 刷新列表 ",-1)])]),_:1},8,["loading"])]),a("section",Q,[e[5]||(e[5]=a("header",{class:"table-card__header table-header"},[a("h2",{id:"leader-approvals-table-title",class:"page-section-title"},"待审核列表")],-1)),a("div",R,[A((m(),g(y,{data:p.value,border:"","aria-describedby":"leader-approvals-table-title"},{default:r(()=>[o(l,{prop:"id",label:"申请ID",width:"120"}),o(l,{prop:"userId",label:"用户ID",width:"120"}),o(l,{prop:"communityId",label:"社区ID",width:"120"}),o(l,{prop:"status",label:"状态",width:"120"},{default:r(({row:n})=>[o(f,{type:"warning"},{default:r(()=>[_(v(n.status||"PENDING"),1)]),_:2},1024)]),_:1}),o(l,{label:"操作",width:"180"},{default:r(({row:n})=>[o(d,{type:"primary",size:"small",onClick:$=>b(n),loading:n._loading},{default:r(()=>[...e[4]||(e[4]=[_(" 通过 ",-1)])]),_:1},8,["onClick","loading"])]),_:1})]),_:1},8,["data"])),[[h,s.value]]),!s.value&&!p.value.length?(m(),g(E,{key:0,description:"暂无待审核申请"})):M("",!0)])])])}}},_e=L(S,[["__scopeId","data-v-c786f3a2"]]);export{_e as default};
