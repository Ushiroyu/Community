import"./index-BRtYqat6.js";import{v as k,E as w,a as N}from"./el-table-column-KoNqeqPg.js";import{E as S}from"./el-empty-aBf0dV6S.js";import"./el-checkbox-BY45api5.js";import"./el-tooltip-l0sNRNKZ.js";import"./el-scrollbar-eEMXupeW.js";/* empty css               */import{_ as B,E as C}from"./_plugin-vue_export-helper-BH_is9DS.js";import{a as D}from"./supplier-DrPTNbdy.js";import{b as I}from"./admin-C6mbQG5y.js";import{E as p}from"./http-y0YsLSxU.js";import{E as x}from"./index-B89e1ymx.js";import{r as _,p as T,c as V,o as m,a,E as s,Q as v,D as o,U as A,B as g,R as M,P as u}from"./vendor-vue-CpX8Jn4o.js";import"./_Uint8Array-CSQzEANR.js";import"./_initCloneObject-CQpWRfh0.js";import"./_baseIteratee-BeonsPYq.js";import"./isEqual-BuOCdSDg.js";import"./castArray-esTnwj7j.js";import"./debounce-Bg3a7BCK.js";import"./vendor-icons-CDwfVtjd.js";import"./index-BquL_2tb.js";import"./index-CkCNIzEM.js";import"./focus-trap-P_RRA6FG.js";import"./typescript-Bp3YSIOJ.js";const P={class:"page-wrap supplier-approvals"},z={class:"page-card approvals-hero","aria-labelledby":"supplier-approvals-title","aria-describedby":"supplier-approvals-desc"},G={class:"sr-only"},L={class:"table-card",role:"region","aria-labelledby":"supplier-approvals-table-title"},Q={class:"table-card__body"},R={__name:"SupplierApprovals",setup(U){const i=_([]),r=_(!1),c=async()=>{var t;r.value=!0;try{const e=await D();if(e.code===0){const n=e.pendingSuppliers||((t=e.data)==null?void 0:t.pendingSuppliers)||[];i.value=n.map(l=>({...l,_loading:!1}))}else p.error(e.msg||"加载失败")}catch(e){p.error(e.message||"加载失败")}finally{r.value=!1}},b=async t=>{t._loading=!0;try{const e=await I(t.id,t.userId);e.code===0?(p.success("已通过审核"),await c()):p.error(e.msg||"审核失败")}catch(e){p.error(e.message||"审核失败")}finally{t._loading=!1}};return T(c),(t,e)=>{const n=C,l=N,f=x,y=w,E=S,h=k;return m(),V("div",P,[a("section",z,[a("div",null,[e[0]||(e[0]=a("span",{class:"pill"},"供应商审核",-1)),e[1]||(e[1]=a("h1",{id:"supplier-approvals-title",class:"hero-title"},"审核供应商入驻",-1)),e[2]||(e[2]=a("p",{id:"supplier-approvals-desc",class:"hero-desc"}," 核对供应商资质后即可通过申请，丰富社区团购商品供给。 ",-1)),a("p",G," 当前共有 "+v(i.value.length)+" 个供应商申请待审核。 ",1)]),s(n,{type:"primary",onClick:c,loading:r.value},{default:o(()=>[...e[3]||(e[3]=[u(" 刷新列表 ",-1)])]),_:1},8,["loading"])]),a("section",L,[e[5]||(e[5]=a("header",{class:"table-card__header table-header"},[a("h2",{id:"supplier-approvals-table-title",class:"page-section-title"},"待审核供应商")],-1)),a("div",Q,[A((m(),g(y,{data:i.value,border:"","aria-describedby":"supplier-approvals-table-title"},{default:o(()=>[s(l,{prop:"id",label:"申请ID",width:"120"}),s(l,{prop:"userId",label:"用户ID",width:"120"}),s(l,{prop:"companyName",label:"公司名称"}),s(l,{prop:"status",label:"状态",width:"140"},{default:o(({row:d})=>[s(f,{type:"warning"},{default:o(()=>[u(v(d.status||"PENDING"),1)]),_:2},1024)]),_:1}),s(l,{label:"操作",width:"180"},{default:o(({row:d})=>[s(n,{type:"primary",size:"small",onClick:$=>b(d),loading:d._loading},{default:o(()=>[...e[4]||(e[4]=[u(" 通过 ",-1)])]),_:1},8,["onClick","loading"])]),_:1})]),_:1},8,["data"])),[[h,r.value]]),!r.value&&!i.value.length?(m(),g(E,{key:0,description:"暂无待审核供应商"})):M("",!0)])])])}}},ue=B(R,[["__scopeId","data-v-209889f3"]]);export{ue as default};
