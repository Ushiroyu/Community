import{u as x}from"./index-BRtYqat6.js";import{E as B,a as I}from"./el-descriptions-item-DmnZKFQu.js";import{E as P,a as N}from"./el-date-picker-panel-DVo8kLur.js";import{E as O}from"./el-skeleton-item-CblNMWFr.js";import{_ as C,E as G}from"./_plugin-vue_export-helper-BH_is9DS.js";/* empty css                 */import"./el-scrollbar-eEMXupeW.js";import{d as m}from"./vendor-utils-Bof1u0Bp.js";import{h as T,E as b}from"./http-y0YsLSxU.js";import{r as f,b as y,c as U,o as h,a as t,Q as a,E as l,D as o,B as E,P as n}from"./vendor-vue-CpX8Jn4o.js";import"./vnode-D67uqoy8.js";import"./index-C9h3pgbl.js";import"./vendor-icons-CDwfVtjd.js";import"./typescript-Bp3YSIOJ.js";import"./index-eOEDSGTO.js";import"./debounce-Bg3a7BCK.js";import"./index-BquL_2tb.js";import"./isEqual-BuOCdSDg.js";import"./_Uint8Array-CSQzEANR.js";import"./index-CkCNIzEM.js";import"./focus-trap-P_RRA6FG.js";const j={class:"page-wrap supplier-stats"},F={class:"page-card stats-hero","aria-labelledby":"supplier-stats-hero-title","aria-describedby":"supplier-stats-hero-desc"},Q={class:"sr-only"},R={class:"hero-filter","aria-label":"筛选时间"},q={class:"page-card overview-card",role:"region","aria-labelledby":"supplier-overview-title"},z={class:"page-card insight-grid"},A={class:"insight-card"},H={class:"insight-value"},J={class:"insight-card"},K={class:"insight-value"},L={class:"insight-card"},W={class:"insight-value"},X={__name:"SupplierStats",setup(Y){const k=x(),d=f(!1),s=f({total:0,paid:0,shipped:0,delivered:0,gmv:0,approved:0,pendingProducts:0}),c=f([m().subtract(6,"day").startOf("day").toDate(),m().endOf("day").toDate()]),v=p=>(Number(p)||0).toFixed(2),w=y(()=>s.value.shipped?Math.min(100,Math.round(s.value.delivered/s.value.shipped*100)):0),S=y(()=>s.value.shipped?v(s.value.gmv/s.value.shipped):"0.00"),_=async()=>{var p;d.value=!0;try{const[e,u]=c.value||[],g={supplierId:k.userId,from:e?m(e).toISOString():void 0,to:u?m(u).toISOString():void 0},r=await T.get("/stats/supplier-overview",{params:g});r.code===0?s.value=r.overview||((p=r.data)==null?void 0:p.overview)||s.value:b.error(r.msg||"统计数据加载失败")}catch(e){b.error(e.message||"统计异常")}finally{d.value=!1}};return _(),(p,e)=>{const u=P,g=G,r=O,i=I,V=N,M=B;return h(),U("div",j,[t("section",F,[t("div",null,[e[1]||(e[1]=t("span",{class:"pill"},"经营分析",-1)),e[2]||(e[2]=t("h1",{id:"supplier-stats-hero-title",class:"hero-title"},"供应链履约表现",-1)),e[3]||(e[3]=t("p",{id:"supplier-stats-hero-desc",class:"hero-desc"}," 通过时间维度查看订单履约情况、审核进度与GMV趋势，及时调整供货节奏。 ",-1)),t("p",Q," 当前统计显示订单总数 "+a(s.value.total)+"，已发货 "+a(s.value.shipped)+"，GMV 总额 "+a(v(s.value.gmv))+" 元。 ",1)]),t("div",R,[e[5]||(e[5]=t("span",{id:"supplier-stats-filter-tip",class:"sr-only"},"调整时间范围后数据会刷新。",-1)),l(u,{modelValue:c.value,"onUpdate:modelValue":e[0]||(e[0]=D=>c.value=D),type:"datetimerange","start-placeholder":"开始时间","end-placeholder":"结束时间","unlink-panels":!0,onChange:_,"aria-label":"选择统计时间范围","aria-describedby":"supplier-stats-filter-tip"},null,8,["modelValue"]),l(g,{type:"primary",onClick:_,loading:d.value},{default:o(()=>[...e[4]||(e[4]=[n(" 刷新数据 ",-1)])]),_:1},8,["loading"])])]),t("section",q,[e[6]||(e[6]=t("h2",{id:"supplier-overview-title",class:"sr-only"},"订单履约概览",-1)),d.value?(h(),E(r,{key:0,animated:"",rows:3})):(h(),E(M,{key:1,column:3,border:""},{default:o(()=>[l(i,{label:"订单总数"},{default:o(()=>[n(a(s.value.total),1)]),_:1}),l(i,{label:"已支付"},{default:o(()=>[n(a(s.value.paid),1)]),_:1}),l(i,{label:"已发货"},{default:o(()=>[n(a(s.value.shipped),1)]),_:1}),l(i,{label:"已签收"},{default:o(()=>[n(a(s.value.delivered),1)]),_:1}),l(i,{label:"GMV"},{default:o(()=>[n("¥ "+a(v(s.value.gmv)),1)]),_:1}),l(i,{label:"通过率"},{default:o(()=>[l(V,{percentage:Math.min(Math.round(s.value.approved/(s.value.total||1)*100),100),"stroke-width":12,status:"success"},null,8,["percentage"])]),_:1})]),_:1}))]),t("section",z,[t("article",A,[e[7]||(e[7]=t("h3",null,"发货准时率",-1)),t("p",H,a(w.value)+"%",1),e[8]||(e[8]=t("p",{class:"muted"},"按计划时间内发货的订单占比。",-1))]),t("article",J,[e[9]||(e[9]=t("h3",null,"平均出货单",-1)),t("p",K,"¥ "+a(S.value),1),e[10]||(e[10]=t("p",{class:"muted"},"衡量单笔订单金额规模。",-1))]),t("article",L,[e[11]||(e[11]=t("h3",null,"待审核商品",-1)),t("p",W,a(s.value.pendingProducts||0),1),e[12]||(e[12]=t("p",{class:"muted"},"需关注商品审核进度。",-1))])])])}}},be=C(X,[["__scopeId","data-v-c2678842"]]);export{be as default};
