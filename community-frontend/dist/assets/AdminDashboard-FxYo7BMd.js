import"./index-BRtYqat6.js";import{E as N,a as P}from"./el-descriptions-item-DmnZKFQu.js";/* empty css               */import{E as C,a as G}from"./el-date-picker-panel-DVo8kLur.js";import{E as I}from"./el-skeleton-item-CblNMWFr.js";import{_ as A,E as R}from"./_plugin-vue_export-helper-BH_is9DS.js";/* empty css                 */import"./el-scrollbar-eEMXupeW.js";import{d as g}from"./vendor-utils-Bof1u0Bp.js";import{o as T}from"./admin-C6mbQG5y.js";import{E}from"./http-y0YsLSxU.js";import{E as j}from"./index-B89e1ymx.js";import{r as y,b as p,c as F,o as h,a,Q as s,E as o,D as r,B as k,P as n}from"./vendor-vue-CpX8Jn4o.js";import"./vnode-D67uqoy8.js";import"./index-C9h3pgbl.js";import"./vendor-icons-CDwfVtjd.js";import"./typescript-Bp3YSIOJ.js";import"./index-eOEDSGTO.js";import"./debounce-Bg3a7BCK.js";import"./index-BquL_2tb.js";import"./isEqual-BuOCdSDg.js";import"./_Uint8Array-CSQzEANR.js";import"./index-CkCNIzEM.js";import"./focus-trap-P_RRA6FG.js";const Q={class:"page-wrap admin-dashboard"},U={class:"page-card dashboard-hero","aria-labelledby":"admin-dashboard-title","aria-describedby":"admin-dashboard-desc"},q={class:"sr-only"},z={class:"hero-actions","aria-label":"筛选时间"},H={class:"page-card",role:"region","aria-labelledby":"admin-keymetrics-title"},J={class:"stat-grid"},K={class:"stat-card"},L={class:"stat-card__value"},W={class:"stat-card"},X={class:"stat-card__value"},Y={class:"stat-card__trend"},Z={class:"stat-card"},$={class:"stat-card__value"},tt={class:"stat-card__trend"},at={class:"stat-card"},et={class:"stat-card__value"},st={class:"page-card overview-section",role:"region","aria-labelledby":"admin-overview-title"},ot={__name:"AdminDashboard",setup(lt){const c=y(!1),e=y({total:0,paid:0,shipped:0,delivered:0,gmv:0}),m=y([g().subtract(6,"day").startOf("day").toDate(),g().endOf("day").toDate()]),v=i=>(Number(i)||0).toFixed(2),w=p(()=>e.value.total?Math.min(100,Math.round(e.value.paid/e.value.total*100)):0),_=p(()=>e.value.total?Math.min(100,Math.round(e.value.delivered/e.value.total*100)):0),M=p(()=>e.value.total?v(e.value.gmv/e.value.total):"0.00"),V=p(()=>Math.max(e.value.total-e.value.paid,0)),D=p(()=>Math.max(e.value.total-e.value.delivered-e.value.shipped,0)),f=async()=>{var i;c.value=!0;try{const[t,b]=m.value||[],u=l=>l?g(l).toISOString():void 0,d=await T(u(t),u(b));d.code===0?e.value=d.overview||((i=d.data)==null?void 0:i.overview)||e.value:E.error(d.msg||"加载平台数据失败")}catch(t){E.error(t.message||"加载异常")}finally{c.value=!1}};return f(),(i,t)=>{const b=C,u=R,d=I,l=P,x=G,B=j,O=N;return h(),F("div",Q,[a("section",U,[a("div",null,[t[1]||(t[1]=a("span",{class:"pill"},"平台总览",-1)),t[2]||(t[2]=a("h1",{id:"admin-dashboard-title",class:"hero-title"},"社区团购运营指标",-1)),t[3]||(t[3]=a("p",{id:"admin-dashboard-desc",class:"hero-desc"}," 按时间范围查看全平台订单、GMV 与履约情况，洞察业务增长动向。 ",-1)),a("p",q," 当前统计显示订单总数 "+s(e.value.total)+"，完成率 "+s(_.value)+"%，GMV "+s(v(e.value.gmv))+" 元。 ",1)]),a("div",z,[t[5]||(t[5]=a("span",{id:"admin-dashboard-filter-tip",class:"sr-only"},"调整时间范围后指标会刷新。",-1)),o(b,{modelValue:m.value,"onUpdate:modelValue":t[0]||(t[0]=S=>m.value=S),type:"datetimerange","start-placeholder":"开始时间","end-placeholder":"结束时间","unlink-panels":!0,onChange:f,"aria-label":"选择运营指标时间范围","aria-describedby":"admin-dashboard-filter-tip"},null,8,["modelValue"]),o(u,{type:"primary",onClick:f,loading:c.value},{default:r(()=>[...t[4]||(t[4]=[n(" 刷新数据 ",-1)])]),_:1},8,["loading"])])]),a("section",H,[t[12]||(t[12]=a("h2",{id:"admin-keymetrics-title",class:"sr-only"},"关键指标",-1)),a("div",J,[a("div",K,[t[6]||(t[6]=a("span",{class:"stat-card__title"},"订单总数",-1)),a("span",L,s(e.value.total),1),t[7]||(t[7]=a("span",{class:"stat-card__trend"},"含所有社区订单",-1))]),a("div",W,[t[8]||(t[8]=a("span",{class:"stat-card__title"},"已支付",-1)),a("span",X,s(e.value.paid),1),a("span",Y,"支付转化率 "+s(w.value)+"%",1)]),a("div",Z,[t[9]||(t[9]=a("span",{class:"stat-card__title"},"已完成",-1)),a("span",$,s(e.value.delivered),1),a("span",tt,"履约完成率 "+s(_.value)+"%",1)]),a("div",at,[t[10]||(t[10]=a("span",{class:"stat-card__title"},"GMV",-1)),a("span",et,"¥ "+s(v(e.value.gmv)),1),t[11]||(t[11]=a("span",{class:"stat-card__trend"},"统计周期内总额",-1))])])]),a("section",st,[t[14]||(t[14]=a("h2",{id:"admin-overview-title",class:"sr-only"},"运营补充数据",-1)),c.value?(h(),k(d,{key:0,animated:"",rows:4})):(h(),k(O,{key:1,column:3,border:""},{default:r(()=>[o(l,{label:"待发货"},{default:r(()=>[n(s(e.value.shipped),1)]),_:1}),o(l,{label:"待支付"},{default:r(()=>[n(s(V.value),1)]),_:1}),o(l,{label:"平均订单值"},{default:r(()=>[n("¥ "+s(M.value),1)]),_:1}),o(l,{label:"完成率"},{default:r(()=>[o(x,{percentage:_.value,status:"success","stroke-width":12},null,8,["percentage"])]),_:1}),o(l,{label:"退款/取消订单"},{default:r(()=>[n(s(D.value),1)]),_:1}),o(l,{label:"平台活跃度"},{default:r(()=>[o(B,{type:"success"},{default:r(()=>[...t[13]||(t[13]=[n("良好",-1)])]),_:1})]),_:1})]),_:1}))])])}}},St=A(ot,[["__scopeId","data-v-295256c6"]]);export{St as default};
